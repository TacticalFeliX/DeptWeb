<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="navbar.css">
  <link rel="stylesheet" href="studentstyle.css" />
  <title>Graduated Ph.D. Students | Department of Physics</title>
</head>

<body>
  <header id="header" class="header"></header>
  <div id="sidebar" class="sidebar"></div>
  <div class="container">
    <h1>Visitors</h1>
    <div class="search-wrapper">
      <input type="text" id="searchInput" placeholder="Search Visitors..." />
    </div>

    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>S.No.</th>
            <th>Name</th>
          </tr>
        </thead>
        <tbody id="visTableBody">
          <!-- Rows inserted dynamically -->
        </tbody>
      </table>
    </div>
  </div>

  <footer id="footer" class="footer"></footer>

  <!-- CSV parsing -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <script>
  const targetPage = "Visitors";

  fetch("files/data-files/info.csv")
    .then((response) => response.text())
    .then((csvText) => {
      Papa.parse(csvText, {
        header: true,
        skipEmptyLines: true,
        transformHeader: (h) => h.trim(),
        complete: function (results) {
          const data = results.data;
          const tbody = document.getElementById("visTableBody");
          let serialNumber = 1;

          data.forEach((entry) => {
            if (
              entry.Page?.trim().toLowerCase() === targetPage.toLowerCase() &&
              entry.Name?.trim() !== ""
            ) {
              const row = document.createElement("tr");
              row.innerHTML = `
                <td>${serialNumber++}</td>
                <td>${entry.Name}</td>
              `;
              tbody.appendChild(row);
            }
          });
        },
      });
    })
    .catch((error) => {
      console.error("Failed to load or render visitor data:", error);
      document.getElementById("phdTableBody").innerHTML =
        "<p style='color:red;'>Failed to load visitor data.</p>";
    });

  // Search filter for Visitors
  document.getElementById("searchInput").addEventListener("keyup", function () {
    const filter = this.value.toLowerCase();
    const rows = document.querySelectorAll("#visTableBody tr");

    let visibleIndex = 0;

    rows.forEach((row) => {
      const text = row.textContent.toLowerCase();
      if (text.includes(filter)) {
        row.style.display = "";
        row.style.backgroundColor =
          visibleIndex % 2 === 0 ? "#ffffff" : "#f3ffff";
        visibleIndex++;
      } else {
        row.style.display = "none";
      }
    });
  });
</script>


  <script src="navbar.js"></script>
</body>

</html>
